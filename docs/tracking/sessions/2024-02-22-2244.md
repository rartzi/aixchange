# Session: Fix Events Page Search and Filtering

## Context
The search and filtering functionality on the /events page was not working properly. The filters were not updating the URL and the search was not being applied to the events list.

## Changes Made

1. Created new API endpoint for filtered events:
- Added `/api/events/route.ts` to handle search and filter parameters
- Implemented filtering by search term, status, and type
- Returns events with participant and solution counts

2. Updated EventsFilters component:
- Added URL search params integration
- Implemented debounced search input
- Added proper type handling for status and type filters
- Improved reset functionality

3. Updated EventsGrid component:
- Converted to client component
- Added integration with URL search params
- Implemented loading state
- Added proper error handling

4. Dependencies:
- Added `use-debounce` package for search input optimization

## Technical Details

### API Route Implementation
```typescript
// /api/events/route.ts
export async function GET(request: NextRequest) {
  const searchParams = request.nextUrl.searchParams
  const search = searchParams.get("search") || ""
  const status = searchParams.get("status") || "ALL"
  const type = searchParams.get("type") || "ALL"

  const whereClause = {
    isPublic: true,
    ...(search && {
      OR: [
        { title: { contains: search, mode: "insensitive" } },
        { shortDescription: { contains: search, mode: "insensitive" } },
      ],
    }),
    ...(status !== "ALL" && { status }),
    ...(type !== "ALL" && { type }),
  }
}
```

### Filter Component Updates
```typescript
// EventsFilters.tsx
const debouncedUpdateSearch = useDebouncedCallback((value: string) => {
  const queryString = createQueryString({ search: value })
  router.push(`${pathname}?${queryString}`)
}, 300)
```

## Testing Done
- Verified search functionality works with debouncing
- Confirmed status and type filters update correctly
- Tested filter reset functionality
- Checked loading states and error handling

## Next Steps
- Consider adding pagination for large event lists
- Add sorting options
- Implement filter persistence across page reloads

## Related Issues
- Fixes issue with search and filtering not working on /events page

## References
- [Next.js Search Params Documentation](https://nextjs.org/docs/app/api-reference/functions/use-search-params)
- [use-debounce Package](https://www.npmjs.com/package/use-debounce)